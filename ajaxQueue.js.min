(function(){var a,b,c,d,e,f,g,h,i;a=jQuery,i={onError:function(a){return alert("An error occured, please refresh the page: "+a)}},c=!1,h=[],d=!0,b=[],f=function(){if(d&&h.length>0)return d=!1,g(function(){var a,c,e;for(c=0,e=b.length;c<e;c++)a=b[c],a();return b=[],d=!0,f()})},g=function(a){var b;return b=h.shift(),b().fail(i.onError).done(function(){return h.length===0?a():g(a)})},e={init:function(b){return alert("init"),i=a.extend(i,b),this},add:function(a){return alert("add"),h.push(a),f(),this},flush:function(a){return alert("flush"),d?a():b.push(a),this}},a.fn.ajaxQueue=function(b){return b in e?e[b].apply(this,Array.prototype.slice.call(arguments,1)):typeof b=="object"||!b?e.init.apply(this,arguments):a.error("Method "+b+" does not exist on jQuery.ajaxQueue")}}).call(this);